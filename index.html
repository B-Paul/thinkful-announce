<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  <!--Add a button for the user to click to initiate auth sequence -->
  <script type="text/javascript">

    var clientId = '549978578689-gth04j75b4e3g9tme2a983hni8l50775.apps.googleusercontent.com';

    var apiKey = 'AIzaSyCSYzqlibFyFE93jd_amSQTWDzZ54g0Su4';

    var scopes = 'https://www.googleapis.com/auth/plus.me';

    function handleClientLoad() {
      // Step 2: Reference the API key
      gapi.client.setApiKey(apiKey);
      window.setTimeout(checkAuth,1);
    }

    function checkAuth() {
      gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
    }

    function handleAuthResult(authResult) {
      var authorizeButton = document.getElementById('authorize-button');
      if (authResult && !authResult.error) {
        authorizeButton.style.visibility = 'hidden';
        makeApiCall();
      } else {
        handleAuthClick();
      }
    }

    function handleAuthClick() {
      // Step 3: get authorization to use private data
      gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
      return false;
    }

    // Load the API and make an API call.  Display the results on the screen.
    function makeApiCall() {
      // Step 4: Load the Google+ API
      gapi.client.load('plus', 'v1').then(function() {
        // Step 5: Assemble the API request
        var request = gapi.client.plus.people.get({
          'userId': 'me'
        });
        // Step 6: Execute the API request
        request.then(function(resp) {
          var heading = document.createElement('h4');
          var image = document.createElement('img');
          image.src = resp.result.image.url;
          heading.appendChild(image);
          heading.appendChild(document.createTextNode(resp.result.displayName));

          document.getElementById('content').appendChild(heading);
        }, function(reason) {
          console.log('Error: ' + reason.result.error.message);
        });
      });
    }
  </script>
  <!-- Step 1: Load JavaScript client library -->
  <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
</body>
</html>