<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  <!--Add a button for the user to click to initiate auth sequence -->
  <script type="text/javascript">

    var clientId = '549978578689-gth04j75b4e3g9tme2a983hni8l50775.apps.googleusercontent.com';

    var apiKey = 'AIzaSyCSYzqlibFyFE93jd_amSQTWDzZ54g0Su4';

    var scopes = 'https://www.googleapis.com/auth/plus.me';

    function handleClientLoad() {
      gapi.client.setApiKey(apiKey);
      window.setTimeout(checkAuth,1);
    }

    function checkAuth() {
      gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
    }

    function handleAuthResult(authResult) {
      if (authResult && !authResult.error) {
        console.log("we're in!")
      } else {
        var clickMe = document.createElement('a');
        clickMe.onclick = handleAuthClick;
        document.body.appendChild(clickMe);
        clickMe.click();
      }
    }

    function handleAuthClick() {
      gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
    }
  </script>
  <!-- Step 1: Load JavaScript client library -->
  <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
</body>
</html>